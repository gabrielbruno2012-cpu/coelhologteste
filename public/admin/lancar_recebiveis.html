
<html><head>
<link rel="stylesheet" href="/css/style.css">
</head><body>
<div id="sidebar"></div>
<div class="main">
 <div class="header-right"><button class="btn" onclick="logout()">Logout</button></div>
 <h1>Lançar Recebível</h1>

 <div class="card">
   <select class="input" id="uid"></select>
   <input class="input" id="valor" placeholder="Valor" type="number" step="0.01">
   <input class="input" id="data" type="date">
   <button class="btn" onclick="lancar()">Lançar</button>
   <div id="msg"></div>
 </div>
</div>

<script>
fetch('/admin/sidebar_admin.html').then(r=>r.text()).then(h=>sidebar.innerHTML=h);
function logout(){localStorage.clear();location="/";}

async function loadUsers(){
 let u=await fetch('/api/usuarios').then(r=>r.json());
 uid.innerHTML = u.map(x=>`<option value='${x.id}'>${x.nome}</option>`).join('');
}
loadUsers();

async function lancar(){
 let body={usuario_id:uid.value,valor:valor.value,data:data.value,tipo:"Admin",status:"Pendente"};
 await fetch("/api/recebiveis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(body)});
 msg.innerText="Lançado!";
}
</script>
</body></html>
